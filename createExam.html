<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css" />
	<title>Create Exam</title>
</head>
<body>
    <!-- This is just an example template to help make 'Create Exam' GUI -->
    <form id="exam-form">
        <h1>Create Exam</h1>
        <label for="exam-name">Exam Name:</label>
        <input type="text" id="exam-name" name="exam-name"><br><br>

        <label for="course-name">Course Name:</label>
        <input type="text" id="course-name" name="course-name"><br><br>

        <label for="duration">Start time:</label>
        <input type="time" id="start-time" name="start-time"><br><br>

        <label for="hours">Hours:</label>
        <input type="number" id="hours" name="hours"><br><br>

        <label for="minutes">Minutes:</label>
        <input type="number" id="minutes" name="minutes"><br><br>

        <label for="weight">Total Marks:</label>
        <input type="weight" id="weight" name="weight"><br><br>

        <fieldset>
            <legend>Question 1</legend>
            <label for="q1">Question:</label>
            <input type="text" id="q1" name="q1"><br><br>
            <label for="a1">Answer:</label>
            <input type="text" id="a1" name="a1"><br><br>
        </fieldset>

        <fieldset>
            <legend>Question 2</legend>
            <label for="q2">Question:</label>
            <input type="text" id="q2" name="q2"><br><br>
            <label for="a2">Answer:</label>
            <input type="text" id="a2" name="a2"><br><br>
        </fieldset>

        <fieldset>
            <legend>Question 3</legend>
            <label for="q3">Question:</label>
            <input type="text" id="q3" name="q3"><br><br>
            <label for="a3">Answer:</label>
            <input type="text" id="a3" name="a3"><br><br>
        </fieldset>

        <input type="submit" value="Submit">
    </form>

    <script type="module">
        import Registry from "./scripts/Registry.js"
        import TrainingManager from "./scripts/TrainingManager.js"

        Registry.instance.loadRegistry()

        function createExam(e) {
            console.log(Registry.instance)
            e.preventDefault()

            TrainingManager.createExam(courseName, minutes, hours, startTime, weight);

            Registry.instance.saveRegistry()

            // Create an object that represents the exam and its questions and answers
            var exam = {
                name: examName,
                course: courseName,
                startTime: startTime,
                hours: hours,
                minutes: minutes,
                weight: weight,
                questions: [
                    {
                        question: q1,
                        answer: a1
                    },
                    {
                        question: q2,
                        answer: a2
                    },
                    {
                        question: q3,
                        answer: a3
                    }
                ]
            };

            // Do something with the exam object, such as save it to a database or display it to the user
            console.log(exam);
            alert("Exam created!");
            window.location.href = "managerMainMenu.html";
        }

        // Get the values of the exam name, course name, start time, 
        // hours, minutes, weight and all three questions and answers
        var examName = document.getElementById("exam-name").value;
        var courseName = document.getElementById("course-name").value;
        var startTime = document.getElementById("start-time").value;
        var hours = document.getElementById("hours").value;
        var minutes = document.getElementById("minutes").value;
        var weight = document.getElementById("weight").value;

        var q1 = document.getElementById("q1").value;
        var a1 = document.getElementById("a1").value;

        var q2 = document.getElementById("q2").value;
        var a2 = document.getElementById("a2").value;

        var q3 = document.getElementById("q3").value;
        var a3 = document.getElementById("a3").value;

        var examForm = document.getElementById("exam-form");
        examForm.addEventListener("submit", createExam);
    </script>
</body>
</html>
